<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../styles/styles.css">
  <title>File uploader</title>
</head>

<body>

  <header>
    <h1>File Uploader</h1>

    <%- include("partials/error.ejs") %>

    <% if (locals.currentUser) { %>
    <p>Welcome, <%= currentUser.username %>!</p>
    <a href="/logout">Logout</a>
    <% } else {%>
    <a href="/login">Login</a>
    <a href="/signup">Signup</a>
    <% } %>

  </header>

  <main>
    <% if (locals.currentUser) { %>

    <h2>New Folder</h2>
    <!-- TODO: make sure this works for multiple files -->
    <form action="/createfolder" method="post">
      <label for="foldername">New Folder Name: </label>
      <input type="text" id="foldername" name="foldername" required />
      <button type="submit">Submit</button>
    </form>

    <% if (folders.length > 0) { %>
    <h2>Folders</h2>
    <ul class="folders">
      <% for (let i = 0; i < folders.length; i++) { %>
      <li class="single-folder">

        <!-- TODO: link template -->
        <a href="/"><%= folders[i].name %></a>

        <p>Created: <%= new Date(folders[i].createdAt).toLocaleString() %></p>

        <form action="/delete/<%= folders[i].id %>" method="post">
          <button type="submit" onclick="return confirm('Are you sure you want to delete this folder?')">DELETE folder</button>
        </form>

      </li>
      <% } %>
    </ul>
    <% } %>
    <% } %>
  </main>
</body>


</html>